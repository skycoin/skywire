language: go, node_js

go:
  - 1.17

node_js:
  - 14.19.1

os: windows

compiler:
  - gcc

before_install:
  - choco install make
  - go install github.com/golangci/golangci-lint/cmd/golangci-lint@v1.46.0
  - go install golang.org/x/tools/cmd/goimports@latest
  - make dep

before_script:
  - set GO1111MODULE=on
  - make check-windows

script:
  - make build-windows
  - make build-systray-windows

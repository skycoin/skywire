version: "{build}"

stack: node 10.16.3

environment:
  matrix:
  - job_name: windows-amd64
    appveyor_build_worker_image: Visual Studio 2019
    GOARCH: amd64
  
for:
  - # Windows
    skip_tags: true
    matrix:
      only:
        - job_name: Windows

    environment:
      matrix:
        - GOARCH: amd64

    install:
      - cmd: choco install make
      - go get github.com/golangci/golangci-lint/cmd/golangci-lint@v1.42.0
      - make dep
      - make install-deps-ui
    
    before_build:
      - make check
      - make lint-ui
  
    build_script:
      - make build
      - make build-ui

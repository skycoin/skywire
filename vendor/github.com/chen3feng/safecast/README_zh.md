# safecast -- Safe Numeric Type Cast Library For Go

[English](README.md) | 简体中文

[![License Apache 2.0](https://img.shields.io/badge/License-Apache_2.0-red.svg)](COPYING)
[![Python](https://img.shields.io/badge/Language-go1.18+-blue.svg)](https://www.python.org/)
![Build Status](https://github.com/chen3feng/safecast/actions/workflows/go.yml/badge.svg)
[![Coverage Status](https://coveralls.io/repos/github/chen3feng/safecast/badge.svg?branch=master)](https://coveralls.io/github/chen3feng/safecast?branch=master)
[![GoReport](https://goreportcard.com/badge/github.com/securego/gosec)](https://goreportcard.com/report/github.com/chen3feng/safecast)
[![Go Reference](https://pkg.go.dev/badge/github.com/chen3feng/safecast.svg)](https://pkg.go.dev/github.com/chen3feng/safecast)

安全的数值类型转换库。支持除了 `uintptr` 外的所有整数和浮点数类型。

用法：

```go
val, ok := To[type](value)
```

`ok == false` 表示值溢出。但是无论成功失败，`val` 都等效于直接用普通类型转换（`type(value)`）的结果。

另外也有目标类型非参数化的形式：

```go
val, ok := ToInt32(value)
```

用法同全泛型版本，并且性能上会好一些。

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# safecast

```go
import "github.com/chen3feng/safecast"
```

Package safecast provide a safe way to cast a numeric value from type A to type B, with overflow and underflow check.

## Index

- [func To[ToType numericType, FromType numericType](value FromType) (result ToType, ok bool)](<#func-to>)
- [func ToFloat32[FromType numericType](value FromType) (float32, bool)](<#func-tofloat32>)
- [func ToFloat64[FromType numericType](value FromType) (float64, bool)](<#func-tofloat64>)
- [func ToInt[FromType numericType](value FromType) (int, bool)](<#func-toint>)
- [func ToInt16[FromType numericType](value FromType) (int16, bool)](<#func-toint16>)
- [func ToInt32[FromType numericType](value FromType) (int32, bool)](<#func-toint32>)
- [func ToInt64[FromType numericType](value FromType) (int64, bool)](<#func-toint64>)
- [func ToInt8[FromType numericType](value FromType) (int8, bool)](<#func-toint8>)
- [func ToUint[FromType numericType](value FromType) (uint, bool)](<#func-touint>)
- [func ToUint16[FromType numericType](value FromType) (uint16, bool)](<#func-touint16>)
- [func ToUint32[FromType numericType](value FromType) (uint32, bool)](<#func-touint32>)
- [func ToUint64[FromType numericType](value FromType) (uint64, bool)](<#func-touint64>)
- [func ToUint8[FromType numericType](value FromType) (uint8, bool)](<#func-touint8>)


## func [To](<https://github.com/chen3feng/safecast/blob/master/generics.go#L12>)

```go
func To[ToType numericType, FromType numericType](value FromType) (result ToType, ok bool)
```

To converts a numeric value from the FromType to the specified ToType type safely. result will always be same as the usual type cast \(type\(value\)\), but ok is false when overflow or underflow occured.

<details><summary>Example (Float Overflow)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
	"math"
)

func main() {
	n, ok := safecast.To[float32](math.MaxFloat32 * 2)
	fmt.Print(n, ok)
}
```

#### Output

```
+Inf false
```

</p>
</details>

<details><summary>Example (Int No Overflow)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
)

func main() {
	b, ok := safecast.To[byte](255)
	fmt.Print(b, ok)
}
```

#### Output

```
255 true
```

</p>
</details>

<details><summary>Example (Int Overflow)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
)

func main() {
	b, ok := safecast.To[byte](256)
	fmt.Print(b, ok)
}
```

#### Output

```
0 false
```

</p>
</details>

<details><summary>Example (Value In Range)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
)

func main() {
	n, ok := safecast.To[uint](1)
	fmt.Print(n, ok)
}
```

#### Output

```
1 true
```

</p>
</details>

<details><summary>Example (Value Out Of Range)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
)

func main() {
	n, ok := safecast.To[uint32](-1)
	fmt.Print(n, ok)
}
```

#### Output

```
4294967295 false
```

</p>
</details>

## func [ToFloat32](<https://github.com/chen3feng/safecast/blob/master/generics.go#L398>)

```go
func ToFloat32[FromType numericType](value FromType) (float32, bool)
```

ToFloat32 converts value to float32 type safely. result will always be same as the usual type cast\(float32\(value\)\), but ok is false when overflow or underflow occured.

## func [ToFloat64](<https://github.com/chen3feng/safecast/blob/master/generics.go#L432>)

```go
func ToFloat64[FromType numericType](value FromType) (float64, bool)
```

ToFloat64 converts value to float64 type safely. result will always be same as the usual type cast\(float64\(value\)\), but ok is false when overflow or underflow occured.

## func [ToInt](<https://github.com/chen3feng/safecast/blob/master/generics.go#L194>)

```go
func ToInt[FromType numericType](value FromType) (int, bool)
```

ToInt converts value to int type safely. result will always be same as the usual type cast\(int\(value\)\), but ok is false when overflow or underflow occured.

## func [ToInt16](<https://github.com/chen3feng/safecast/blob/master/generics.go#L92>)

```go
func ToInt16[FromType numericType](value FromType) (int16, bool)
```

ToInt16 converts value to int16 type safely. result will always be same as the usual type cast\(int16\(value\)\), but ok is false when overflow or underflow occured.

## func [ToInt32](<https://github.com/chen3feng/safecast/blob/master/generics.go#L126>)

```go
func ToInt32[FromType numericType](value FromType) (int32, bool)
```

ToInt32 converts value to int32 type safely. result will always be same as the usual type cast\(int32\(value\)\), but ok is false when overflow or underflow occured.

## func [ToInt64](<https://github.com/chen3feng/safecast/blob/master/generics.go#L160>)

```go
func ToInt64[FromType numericType](value FromType) (int64, bool)
```

ToInt64 converts value to int64 type safely. result will always be same as the usual type cast\(int64\(value\)\), but ok is false when overflow or underflow occured.

## func [ToInt8](<https://github.com/chen3feng/safecast/blob/master/generics.go#L58>)

```go
func ToInt8[FromType numericType](value FromType) (int8, bool)
```

ToInt8 converts value to int8 type safely. result will always be same as the usual type cast\(int8\(value\)\), but ok is false when overflow or underflow occured.

## func [ToUint](<https://github.com/chen3feng/safecast/blob/master/generics.go#L364>)

```go
func ToUint[FromType numericType](value FromType) (uint, bool)
```

ToUint converts value to uint type safely. result will always be same as the usual type cast\(uint\(value\)\), but ok is false when overflow or underflow occured.

## func [ToUint16](<https://github.com/chen3feng/safecast/blob/master/generics.go#L262>)

```go
func ToUint16[FromType numericType](value FromType) (uint16, bool)
```

ToUint16 converts value to uint16 type safely. result will always be same as the usual type cast\(uint16\(value\)\), but ok is false when overflow or underflow occured.

## func [ToUint32](<https://github.com/chen3feng/safecast/blob/master/generics.go#L296>)

```go
func ToUint32[FromType numericType](value FromType) (uint32, bool)
```

ToUint32 converts value to uint32 type safely. result will always be same as the usual type cast\(uint32\(value\)\), but ok is false when overflow or underflow occured.

## func [ToUint64](<https://github.com/chen3feng/safecast/blob/master/generics.go#L330>)

```go
func ToUint64[FromType numericType](value FromType) (uint64, bool)
```

ToUint64 converts value to uint64 type safely. result will always be same as the usual type cast\(uint64\(value\)\), but ok is false when overflow or underflow occured.

## func [ToUint8](<https://github.com/chen3feng/safecast/blob/master/generics.go#L228>)

```go
func ToUint8[FromType numericType](value FromType) (uint8, bool)
```

ToUint8 converts value to uint8 type safely. result will always be same as the usual type cast\(uint8\(value\)\), but ok is false when overflow or underflow occured.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
